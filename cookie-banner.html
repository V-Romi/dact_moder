<!-- Banner de Cookies - SOLO EL CONTENIDO SIN HTML WRAPPER -->
<style>
/* ====================================================
        BANNER DE COOKIES - ESTILOS COMPLETOS
        ==================================================== */
        
        /* Reset b√°sico para el banner */
        .cookie-banner * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        /* Banner principal */
        .cookie-banner {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(135deg, #005C98 0%, #00A4E4 100%);
            color: white;
            padding: 1.5rem 2rem;
            box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.15);
            z-index: 10000;
            transform: translateY(100%);
            transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .cookie-banner.show {
            transform: translateY(0);
        }
        
        .cookie-banner.hide {
            transform: translateY(100%);
        }
        
        /* Contenedor principal del banner */
        .cookie-content {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 2rem;
            flex-wrap: wrap;
        }
        
        /* Secci√≥n de informaci√≥n */
        .cookie-info {
            flex: 1;
            min-width: 300px;
        }
        
        .cookie-title {
            font-size: 1.2rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .cookie-icon {
            font-size: 1.4rem;
            animation: bounce 2s infinite;
        }
        
        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% {
                transform: translateY(0);
            }
            40% {
                transform: translateY(-4px);
            }
            60% {
                transform: translateY(-2px);
            }
        }
        
        .cookie-text {
            font-size: 0.95rem;
            line-height: 1.5;
            opacity: 0.95;
            margin-bottom: 0.8rem;
        }
        
        .cookie-links {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
        }
        
        .cookie-link {
            color: #4CAF50;
            text-decoration: none;
            font-weight: 600;
            font-size: 0.9rem;
            border-bottom: 1px solid transparent;
            transition: all 0.3s ease;
            padding: 0.2rem 0;
        }
        
        .cookie-link:hover {
            border-bottom-color: #4CAF50;
            color: #66bb6a;
        }
        
        /* Secci√≥n de botones */
        .cookie-actions {
            display: flex;
            gap: 0.8rem;
            align-items: center;
            flex-wrap: wrap;
            min-width: 320px;
            justify-content: flex-end;
        }
        
        /* Estilos base para botones */
        .cookie-btn {
            padding: 0.7rem 1.2rem;
            border: none;
            border-radius: 50px;
            font-weight: 600;
            font-size: 0.85rem;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
            text-transform: uppercase;
            letter-spacing: 0.3px;
            white-space: nowrap;
            min-width: 100px;
        }
        
        .cookie-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }
        
        .cookie-btn:hover::before {
            left: 100%;
        }
        
        /* Bot√≥n configurar */
        .cookie-btn-config {
            background: transparent;
            color: white;
            border: 2px solid rgba(255, 255, 255, 0.4);
            order: 1;
        }
        
        .cookie-btn-config:hover {
            background: rgba(255, 255, 255, 0.1);
            border-color: rgba(255, 255, 255, 0.6);
            transform: translateY(-2px);
        }
        
        /* Bot√≥n rechazar */
        .cookie-btn-reject {
            background: linear-gradient(135deg, #ef4444, #dc2626);
            color: white;
            border: 2px solid transparent;
            box-shadow: 0 4px 15px rgba(239, 68, 68, 0.3);
            order: 2;
        }
        
        .cookie-btn-reject:hover {
            background: linear-gradient(135deg, #dc2626, #b91c1c);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(239, 68, 68, 0.4);
        }
        
        /* Bot√≥n aceptar */
        .cookie-btn-accept {
            background: linear-gradient(135deg, #4CAF50, #45a049);
            color: white;
            border: 2px solid transparent;
            box-shadow: 0 4px 15px rgba(76, 175, 80, 0.3);
            order: 3;
        }
        
        .cookie-btn-accept:hover {
            background: linear-gradient(135deg, #45a049, #4CAF50);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(76, 175, 80, 0.4);
        }
        
        /* Bot√≥n cerrar */
        .cookie-close {
            position: absolute;
            top: 1rem;
            right: 1.5rem;
            background: none;
            border: none;
            color: rgba(255, 255, 255, 0.7);
            font-size: 1.5rem;
            cursor: pointer;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }
        
        .cookie-close:hover {
            background: rgba(255, 255, 255, 0.1);
            color: white;
            transform: rotate(90deg);
        }
        
        /* Modal de configuraci√≥n */
        .cookie-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 10001;
            display: none;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(5px);
            -webkit-backdrop-filter: blur(5px);
        }
        
        .cookie-modal.show {
            display: flex;
            animation: fadeIn 0.3s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .cookie-modal-content {
            background: white;
            border-radius: 20px;
            max-width: 600px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
            position: relative;
            animation: slideUp 0.3s ease;
        }
        
        @keyframes slideUp {
            from { 
                transform: translateY(50px);
                opacity: 0;
            }
            to { 
                transform: translateY(0);
                opacity: 1;
            }
        }
        
        .cookie-modal-header {
            background: linear-gradient(135deg, #005C98, #00A4E4);
            color: white;
            padding: 2rem;
            border-radius: 20px 20px 0 0;
            text-align: center;
        }
        
        .cookie-modal-title {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }
        
        .cookie-modal-subtitle {
            opacity: 0.9;
            font-size: 1rem;
        }
        
        .cookie-modal-body {
            padding: 2rem;
            color: #374151;
        }
        
        .cookie-category {
            margin-bottom: 2rem;
            border: 1px solid #e5e7eb;
            border-radius: 12px;
            overflow: hidden;
        }
        
        .cookie-category-header {
            background: #f8fafc;
            padding: 1rem 1.5rem;
            border-bottom: 1px solid #e5e7eb;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .cookie-category-info {
            display: flex;
            align-items: center;
            gap: 1rem;
        }
        
        .cookie-category-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.1rem;
        }
        
        .cookie-category-technical .cookie-category-icon {
            background: linear-gradient(135deg, #10b981, #059669);
        }
        
        .cookie-category-analytical .cookie-category-icon {
            background: linear-gradient(135deg, #3b82f6, #1d4ed8);
        }
        
        .cookie-category-functional .cookie-category-icon {
            background: linear-gradient(135deg, #f59e0b, #d97706);
        }
        
        .cookie-category-text {
            flex: 1;
        }
        
        .cookie-category-title {
            font-weight: 600;
            font-size: 1.1rem;
            margin-bottom: 0.3rem;
            color: #374151;
        }
        
        .cookie-category-desc {
            font-size: 0.9rem;
            color: #6b7280;
        }
        
        /* Toggle switch */
        .cookie-toggle {
            position: relative;
            width: 60px;
            height: 30px;
        }
        
        .cookie-toggle input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        
        .cookie-toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: 0.3s;
            border-radius: 30px;
        }
        
        .cookie-toggle-slider:before {
            position: absolute;
            content: "";
            height: 22px;
            width: 22px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: 0.3s;
            border-radius: 50%;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }
        
        .cookie-toggle input:checked + .cookie-toggle-slider {
            background: linear-gradient(135deg, #4CAF50, #45a049);
        }
        
        .cookie-toggle input:checked + .cookie-toggle-slider:before {
            transform: translateX(30px);
        }
        
        .cookie-toggle input:disabled + .cookie-toggle-slider {
            background-color: #4CAF50;
            cursor: not-allowed;
        }
        
        .cookie-category-details {
            padding: 1.5rem;
            background: #fafafa;
            font-size: 0.9rem;
            color: #6b7280;
            line-height: 1.6;
        }
        
        .cookie-modal-footer {
            padding: 1.5rem 2rem;
            border-top: 1px solid #e5e7eb;
            display: flex;
            gap: 1rem;
            justify-content: flex-end;
            flex-wrap: wrap;
        }
        
        /* Estilos responsive */
        @media (max-width: 768px) {
            .cookie-banner {
                padding: 1rem;
            }
            
            .cookie-content {
                flex-direction: column;
                gap: 1.5rem;
                text-align: center;
            }
            
            .cookie-actions {
                width: 100%;
                justify-content: center;
                min-width: auto;
                gap: 0.5rem;
            }
            
            .cookie-info {
                min-width: auto;
            }
            
            .cookie-links {
                justify-content: center;
            }
            
            .cookie-btn {
                padding: 0.6rem 1rem;
                font-size: 0.8rem;
                min-width: 90px;
            }
            
            .cookie-close {
                top: 0.5rem;
                right: 1rem;
            }
            
            .cookie-modal-content {
                width: 95%;
                margin: 1rem;
            }
            
            .cookie-modal-header,
            .cookie-modal-body {
                padding: 1.5rem;
            }
            
            .cookie-modal-footer {
                padding: 1rem 1.5rem;
                flex-direction: column;
            }
            
            .cookie-category-header {
                padding: 1rem;
            }
            
            .cookie-category-info {
                flex-direction: column;
                text-align: center;
                gap: 0.5rem;
            }
        }
        
        @media (max-width: 480px) {
            .cookie-actions {
                flex-direction: column;
                width: 100%;
                gap: 0.8rem;
            }
            
            .cookie-btn {
                width: 100%;
                padding: 0.8rem;
                order: initial !important;
            }
            
            /* Orden espec√≠fico en m√≥vil */
            .cookie-btn-accept {
                order: 1;
            }
            
            .cookie-btn-reject {
                order: 2;
            }
            
            .cookie-btn-config {
                order: 3;
            }
            
            .cookie-links {
                flex-direction: column;
                gap: 0.5rem;
            }
        }
</style>

<!-- Banner de Cookies -->
<div id="cookieBanner" class="cookie-banner" role="dialog" aria-labelledby="cookie-title" aria-describedby="cookie-description">
    <button type="button" class="cookie-close" onclick="closeCookieBanner()" aria-label="Cerrar banner de cookies">
        √ó
    </button>
    
    <div class="cookie-content">
        <div class="cookie-info">
            <h2 id="cookie-title" class="cookie-title">
                <span class="cookie-icon">üç™</span>
                Gesti√≥n de Cookies
            </h2>
            <p id="cookie-description" class="cookie-text">
                Utilizamos cookies propias y de terceros para mejorar nuestros servicios y mostrarle publicidad relacionada con sus preferencias. Si contin√∫a navegando, consideramos que acepta su uso.
            </p>
            <div class="cookie-links">
                <a href="politica-de-cookies.html" class="cookie-link" target="_blank">
                    Pol√≠tica de Cookies
                </a>
                <a href="politica-privacidad.html" class="cookie-link" target="_blank">
                    Pol√≠tica de Privacidad
                </a>
            </div>
        </div>
        
        <div class="cookie-actions">
            <button type="button" class="cookie-btn cookie-btn-config" onclick="openCookieSettings()">
                Configurar
            </button>
            <button type="button" class="cookie-btn cookie-btn-reject" onclick="rejectCookies()">
                Rechazar Todas
            </button>
            <button type="button" class="cookie-btn cookie-btn-accept" onclick="acceptAllCookies()">
                Aceptar Todas
            </button>
        </div>
    </div>
</div>

<!-- Modal de Configuraci√≥n -->
<div id="cookieModal" class="cookie-modal" role="dialog" aria-labelledby="modal-title" aria-modal="true">
    <div class="cookie-modal-content">
        <div class="cookie-modal-header">
            <h3 id="modal-title" class="cookie-modal-title">Configuraci√≥n de Cookies</h3>
            <p class="cookie-modal-subtitle">Personaliza qu√© cookies deseas aceptar</p>
        </div>
        
        <div class="cookie-modal-body">
            <!-- Cookies T√©cnicas -->
            <div class="cookie-category cookie-category-technical">
                <div class="cookie-category-header">
                    <div class="cookie-category-info">
                        <div class="cookie-category-icon">‚öôÔ∏è</div>
                        <div class="cookie-category-text">
                            <div class="cookie-category-title">Cookies T√©cnicas</div>
                            <div class="cookie-category-desc">Necesarias para el funcionamiento b√°sico del sitio</div>
                        </div>
                    </div>
                    <label class="cookie-toggle">
                        <input type="checkbox" id="technical-cookies" checked disabled>
                        <span class="cookie-toggle-slider"></span>
                    </label>
                </div>
                <div class="cookie-category-details">
                    Estas cookies son esenciales para que pueda navegar por el sitio web y utilizar sus funciones. Sin estas cookies, los servicios que ha solicitado no se pueden proporcionar. No almacenan ninguna informaci√≥n personal identificable.
                </div>
            </div>

            <!-- Cookies Anal√≠ticas -->
            <div class="cookie-category cookie-category-analytical">
                <div class="cookie-category-header">
                    <div class="cookie-category-info">
                        <div class="cookie-category-icon">üìä</div>
                        <div class="cookie-category-text">
                            <div class="cookie-category-title">Cookies Anal√≠ticas</div>
                            <div class="cookie-category-desc">Nos ayudan a entender c√≥mo interact√∫a con el sitio</div>
                        </div>
                    </div>
                    <label class="cookie-toggle">
                        <input type="checkbox" id="analytical-cookies">
                        <span class="cookie-toggle-slider"></span>
                    </label>
                </div>
                <div class="cookie-category-details">
                    Estas cookies recopilan informaci√≥n sobre c√≥mo utiliza el sitio web, como las p√°ginas que visita y si experimenta alg√∫n error. Toda la informaci√≥n es an√≥nima y se utiliza √∫nicamente para mejorar el funcionamiento del sitio web.
                </div>
            </div>

            <!-- Cookies Funcionales -->
            <div class="cookie-category cookie-category-functional">
                <div class="cookie-category-header">
                    <div class="cookie-category-info">
                        <div class="cookie-category-icon">üîß</div>
                        <div class="cookie-category-text">
                            <div class="cookie-category-title">Cookies Funcionales</div>
                            <div class="cookie-category-desc">Mejoran la funcionalidad y personalizaci√≥n</div>
                        </div>
                    </div>
                    <label class="cookie-toggle">
                        <input type="checkbox" id="functional-cookies">
                        <span class="cookie-toggle-slider"></span>
                    </label>
                </div>
                <div class="cookie-category-details">
                    Estas cookies permiten que el sitio web recuerde las opciones que hace (como su nombre de usuario, idioma o regi√≥n) y proporcionar caracter√≠sticas mejoradas y m√°s personales.
                </div>
            </div>
        </div>
        
        <div class="cookie-modal-footer">
            <button type="button" class="cookie-btn cookie-btn-reject" onclick="closeCookieModal()">
                Cancelar
            </button>
            <button type="button" class="cookie-btn cookie-btn-accept" onclick="saveSettings()">
                Guardar Configuraci√≥n
            </button>
        </div>
    </div>
</div>

<script>
// ====================================================
// JAVASCRIPT PARA GESTI√ìN DE COOKIES - CORREGIDO
// ====================================================

// Esperar a que el DOM est√© listo
document.addEventListener('DOMContentLoaded', function() {
    // Configuraci√≥n
    const COOKIE_CONFIG = {
        name: 'daclimatech_cookie_consent',
        expires: 365, // d√≠as
        domain: window.location.hostname,
        secure: window.location.protocol === 'https:',
        sameSite: 'lax'
    };

    // Estado de las cookies
    let cookieState = {
        technical: true,    // Siempre true (obligatorias)
        analytical: false,
        functional: false,
        consentGiven: false
    };

    // Funci√≥n principal de inicializaci√≥n
    function initializeCookieBanner() {
        const existingConsent = getCookie(COOKIE_CONFIG.name);
        
        if (!existingConsent) {
            // Mostrar banner despu√©s de un peque√±o delay
            setTimeout(() => {
                showCookieBanner();
            }, 1000);
        } else {
            // Cargar configuraci√≥n existente
            try {
                cookieState = JSON.parse(existingConsent);
                applyCookieSettings();
            } catch (e) {
                console.warn('Error al parsear configuraci√≥n de cookies:', e);
                showCookieBanner();
            }
        }
    }

    // Mostrar banner
    function showCookieBanner() {
        const banner = document.getElementById('cookieBanner');
        if (banner) {
            banner.classList.add('show');
            // Foco en el primer bot√≥n para accesibilidad
            setTimeout(() => {
                const firstBtn = banner.querySelector('.cookie-btn');
                if (firstBtn) firstBtn.focus();
            }, 300);
        }
    }

    // Ocultar banner
    function hideCookieBanner() {
        const banner = document.getElementById('cookieBanner');
        if (banner) {
            banner.classList.remove('show');
            banner.classList.add('hide');
            setTimeout(() => {
                banner.style.display = 'none';
            }, 400);
        }
    }

    // Cerrar banner sin aceptar
    window.closeCookieBanner = function() {
        // Solo cookies t√©cnicas
        cookieState = {
            technical: true,
            analytical: false,
            functional: false,
            consentGiven: false
        };
        saveCookieConsent();
        hideCookieBanner();
    }

    // Aceptar todas las cookies
    window.acceptAllCookies = function() {
        cookieState = {
            technical: true,
            analytical: true,
            functional: true,
            consentGiven: true
        };
        
        saveCookieConsent();
        applyCookieSettings();
        hideCookieBanner();
        
        // Mostrar confirmaci√≥n
        showNotification('‚úÖ Configuraci√≥n guardada. Todas las cookies han sido aceptadas.', 'success');
    }

    // Rechazar cookies no esenciales
    window.rejectCookies = function() {
        cookieState = {
            technical: true,
            analytical: false,
            functional: false,
            consentGiven: true
        };
        
        saveCookieConsent();
        applyCookieSettings();
        hideCookieBanner();
        
        // Mostrar confirmaci√≥n
        showNotification('‚ÑπÔ∏è Solo se utilizar√°n las cookies t√©cnicas necesarias.', 'info');
    }

    // Abrir modal de configuraci√≥n
    window.openCookieSettings = function() {
        const modal = document.getElementById('cookieModal');
        if (modal) {
            // Sincronizar checkboxes con estado actual
            document.getElementById('technical-cookies').checked = cookieState.technical;
            document.getElementById('analytical-cookies').checked = cookieState.analytical;
            document.getElementById('functional-cookies').checked = cookieState.functional;
            
            modal.classList.add('show');
            
            // Foco en el primer elemento interactivo
            setTimeout(() => {
                const firstCheckbox = modal.querySelector('input[type="checkbox"]:not([disabled])');
                if (firstCheckbox) firstCheckbox.focus();
            }, 100);
            
            // Prevenir scroll del body
            document.body.style.overflow = 'hidden';
        }
    }

    // Cerrar modal
    window.closeCookieModal = function() {
        const modal = document.getElementById('cookieModal');
        if (modal) {
            modal.classList.remove('show');
            document.body.style.overflow = '';
        }
    }

    // Guardar configuraci√≥n personalizada
    window.saveSettings = function() {
        // Leer estado de checkboxes
        cookieState = {
            technical: true, // Siempre true
            analytical: document.getElementById('analytical-cookies').checked,
            functional: document.getElementById('functional-cookies').checked,
            consentGiven: true
        };
        
        saveCookieConsent();
        applyCookieSettings();
        closeCookieModal();
        hideCookieBanner();
        
        // Mostrar confirmaci√≥n
        showNotification('‚úÖ Tu configuraci√≥n de cookies ha sido guardada correctamente.', 'success');
    }

    // Guardar consentimiento en cookie
    function saveCookieConsent() {
        const consentData = JSON.stringify(cookieState);
        setCookie(COOKIE_CONFIG.name, consentData, COOKIE_CONFIG.expires);
    }

    // Aplicar configuraci√≥n de cookies
    function applyCookieSettings() {
        // Google Analytics
        if (cookieState.analytical) {
            loadGoogleAnalytics();
        } else {
            disableGoogleAnalytics();
        }

        // Cookies funcionales
        if (cookieState.functional) {
            enableFunctionalCookies();
        } else {
            disableFunctionalCookies();
        }

        // Disparar evento personalizado
        const event = new CustomEvent('cookieConsentUpdated', {
            detail: cookieState
        });
        document.dispatchEvent(event);
    }

    // Cargar Google Analytics
    function loadGoogleAnalytics() {
        if (typeof gtag !== 'undefined') return; // Ya cargado

        // Aqu√≠ pondr√≠as tu ID de Google Analytics
        const GA_ID = 'GA_MEASUREMENT_ID'; // Reemplazar con tu ID real
        
        // Cargar script de Google Analytics
        const script = document.createElement('script');
        script.async = true;
        script.src = `https://www.googletagmanager.com/gtag/js?id=${GA_ID}`;
        document.head.appendChild(script);

        // Configurar gtag
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        window.gtag = gtag;
        gtag('js', new Date());
        gtag('config', GA_ID, {
            anonymize_ip: true,
            cookie_flags: 'secure;samesite=lax'
        });
    }

    // Deshabilitar Google Analytics
    function disableGoogleAnalytics() {
        // Deshabilitar tracking
        if (typeof gtag !== 'undefined') {
            gtag('consent', 'update', {
                analytics_storage: 'denied'
            });
        }
        
        // Eliminar cookies de Google Analytics
        deleteCookie('_ga');
        deleteCookie('_ga_*');
        deleteCookie('_gid');
    }

    // Habilitar cookies funcionales
    function enableFunctionalCookies() {
        console.log('Cookies funcionales habilitadas');
    }

    // Deshabilitar cookies funcionales
    function disableFunctionalCookies() {
        // Eliminar cookies funcionales
        deleteCookie('preferences');
        deleteCookie('user_settings');
        deleteCookie('theme');
        deleteCookie('language');
        
        console.log('Cookies funcionales deshabilitadas');
    }

    // Utilidades para manejo de cookies
    function setCookie(name, value, days) {
        const expires = new Date();
        expires.setTime(expires.getTime() + (days * 24 * 60 * 60 * 1000));
        
        let cookieString = `${name}=${encodeURIComponent(value)}; expires=${expires.toUTCString()}; path=/`;
        
        if (COOKIE_CONFIG.domain) {
            cookieString += `; domain=${COOKIE_CONFIG.domain}`;
        }
        
        if (COOKIE_CONFIG.secure) {
            cookieString += '; secure';
        }
        
        cookieString += `; samesite=${COOKIE_CONFIG.sameSite}`;
        
        document.cookie = cookieString;
    }

    function getCookie(name) {
        const nameEQ = name + "=";
        const ca = document.cookie.split(';');
        for (let i = 0; i < ca.length; i++) {
            let c = ca[i];
            while (c.charAt(0) === ' ') c = c.substring(1, c.length);
            if (c.indexOf(nameEQ) === 0) {
                return decodeURIComponent(c.substring(nameEQ.length, c.length));
            }
        }
        return null;
    }

    function deleteCookie(name) {
        if (name.includes('*')) {
            // Eliminar cookies con patr√≥n (como _ga_*)
            const cookies = document.cookie.split(';');
            const pattern = name.replace('*', '');
            cookies.forEach(cookie => {
                const cookieName = cookie.split('=')[0].trim();
                if (cookieName.startsWith(pattern)) {
                    document.cookie = `${cookieName}=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;`;
                }
            });
        } else {
            document.cookie = `${name}=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;`;
            if (COOKIE_CONFIG.domain) {
                document.cookie = `${name}=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/; domain=${COOKIE_CONFIG.domain};`;
            }
        }
    }

    // Sistema de notificaciones
    function showNotification(message, type = 'info') {
        // Crear elemento de notificaci√≥n
        const notification = document.createElement('div');
        notification.className = `cookie-notification cookie-notification-${type}`;
        notification.innerHTML = `
            <div class="cookie-notification-content">
                <span class="cookie-notification-message">${message}</span>
                <button type="button" class="cookie-notification-close" onclick="this.parentElement.parentElement.remove()">√ó</button>
            </div>
        `;
        
        // Estilos inline para la notificaci√≥n
        notification.style.cssText = `
            position: fixed;
            top: 20px;
            right: 20px;
            background: ${type === 'success' ? '#10b981' : '#3b82f6'};
            color: white;
            padding: 1rem 1.5rem;
            border-radius: 12px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
            z-index: 10002;
            max-width: 400px;
            transform: translateX(100%);
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            font-family: inherit;
            font-size: 0.9rem;
            line-height: 1.4;
        `;
        
        notification.querySelector('.cookie-notification-content').style.cssText = `
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 1rem;
        `;
        
        notification.querySelector('.cookie-notification-close').style.cssText = `
            background: none;
            border: none;
            color: white;
            font-size: 1.2rem;
            cursor: pointer;
            padding: 0;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: background-color 0.3s ease;
        `;
        
        // Agregar al DOM
        document.body.appendChild(notification);
        
        // Animar entrada
        setTimeout(() => {
            notification.style.transform = 'translateX(0)';
        }, 100);
        
        // Auto-eliminar despu√©s de 5 segundos
        setTimeout(() => {
            notification.style.transform = 'translateX(100%)';
            setTimeout(() => {
                if (notification.parentElement) {
                    notification.parentElement.removeChild(notification);
                }
            }, 300);
        }, 5000);
    }

    // Event listeners para cerrar modal con ESC
    document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape') {
            const modal = document.getElementById('cookieModal');
            if (modal && modal.classList.contains('show')) {
                closeCookieModal();
            }
        }
    });

    // Cerrar modal al hacer clic fuera
    document.addEventListener('click', function(e) {
        const modal = document.getElementById('cookieModal');
        if (modal && modal.classList.contains('show') && e.target === modal) {
            closeCookieModal();
        }
    });

    // API p√∫blica para desarrolladores
    window.DAClimaTechCookies = {
        // Obtener estado actual
        getState: () => ({ ...cookieState }),
        
        // Verificar si un tipo de cookie est√° aceptado
        isAccepted: (type) => cookieState[type] || false,
        
        // Abrir configuraci√≥n
        openSettings: () => openCookieSettings(),
        
        // Actualizar configuraci√≥n program√°ticamente
        updateSettings: (newState) => {
            cookieState = { ...cookieState, ...newState };
            saveCookieConsent();
            applyCookieSettings();
        },
        
        // Resetear configuraci√≥n
        reset: () => {
            deleteCookie(COOKIE_CONFIG.name);
            location.reload();
        }
    };

    // Inicializar el banner
    initializeCookieBanner();
});
</script>